<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SUJETS0 Graphs - Simple Version</title>
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“Š</text></svg>" />

      <!-- KaTeX for LaTeX rendering -->
      <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" />


      <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
      <link href="https://cdn.jsdelivr.net/npm/daisyui@5/themes.css" rel="stylesheet" type="text/css" />
      <link href="../src/pca_graph_viz/core/graphs.css" rel="stylesheet" type="text/css" />


      <style>
          body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              margin: 0;
              padding: 20px;
              background: #f5f5f5;
              max-width: 1200px;
              margin: 0 auto;
          }

          h1 {
              color: #1976d2;
              margin-bottom: 30px;
          }

          #loading {
              text-align: center;
              color: #666;
              padding: 40px;
              font-size: 18px;
          }

          .error {
              color: #d32f2f;
              padding: 20px;
              background: #ffebee;
              border-radius: 4px;
              margin: 20px 0;
          }

          .graph-row {
              background: white;
              margin-bottom: 30px;
              border-radius: 8px;
              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
              display: flex;
              overflow: hidden;
              min-height: 420px;
          }

          .graph-svg {
              width: 450px;
              padding: 20px;
              padding-bottom: 30px;
              flex-shrink: 0;
              border-right: 1px solid #e0e0e0;
              display: flex;
              flex-direction: column;
              justify-content: flex-start;
              align-items: center;
          }

          .graph-svg-frame {
              width: 100%;
              display: flex;
              align-items: center;
              justify-content: center;
              border: 1px solid #e0e0e0;
              border-radius: 8px;
              padding: 8px;
              background: white;
          }

          .graph-json {
              flex: 1;
              padding: 20px;
              overflow-y: auto;
              max-height: 420px;
              background: #f8f8f8;
          }

          .graph-json pre {
              margin: 0;
              font-family: "Courier New", Courier, monospace;
              font-size: 11px;
              line-height: 1.4;
              white-space: pre-wrap;
              word-wrap: break-word;
          }

          .graph-title {
              font-family: "Monospace", monospace;
              margin-bottom: 15px;
              font-size: 12px;
              flex-shrink: 0;
              width: 100%;
              text-align: left;
              overflow-x: scroll;
          }

          .graph-svg svg {
              width: auto;
              height: auto;
              max-width: 340px;
              max-height: 340px;
              display: block;
              flex-shrink: 0;
          }

          .svg-latex {
              display: flex;
              align-items: center;
              justify-content: center;
              width: 100%;
              height: 100%;
              padding: 0;
              box-sizing: border-box;
              border-radius: 0.25rem;
              font-size: 0.875rem;
          }

          foreignObject .katex {
              margin: 0 !important;
              padding: 0 !important;
              line-height: 1 !important;
              font-size: inherit !important;
              color: inherit !important;
              text-align: center;
          }

          foreignObject div {
              height: 100%;
              width: 100%;
              color: inherit !important;
          }
      </style>

      <style>
          body {
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              margin: 0;
              padding: 20px;
              background: #f5f5f5;
              max-width: 1200px;
              margin: 0 auto;
          }

          h1 {
              color: #1976d2;
              margin-bottom: 30px;
          }

          .graph-row {
              background: white;
              margin-bottom: 30px;
              border-radius: 8px;
              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
              display: flex;
              overflow: hidden;
              min-height: 420px;
          }

          .graph-svg {

              width: 450px;
              padding: 20px;
              padding-bottom: 30px;
              flex-shrink: 0;
              border-right: 1px solid #e0e0e0;
              display: flex;
              flex-direction: column;
              justify-content: flex-start;
              align-items: center;
          }

          .graph-svg-frame {
              width: 100%;
              display: flex;
              align-items: center;
              justify-content: center;
              border: 1px solid #e0e0e0;
              border-radius: 8px;
              padding: 8px;
              background: white;
          }

          .graph-json {
              flex: 1;
              padding: 20px;
              overflow-y: auto;
              max-height: 420px;
              background: #f8f8f8;
          }

          .graph-json pre {
              margin: 0;
              font-family: "Courier New", Courier, monospace;
              font-size: 11px;
              line-height: 1.4;
              white-space: pre-wrap;
              word-wrap: break-word;
          }

          .graph-title {
              font-family: "Monospace", monospace;
              margin-bottom: 15px;
              font-size: 12px;
              flex-shrink: 0;
              width: 100%;
              text-align: left;
              overflow-x: scroll;
          }

          .graph-header {
              width: 100%;
              text-align: left;
              margin-bottom: 8px;
          }

          .graph-header h2 {
              font-size: 14px;
              margin: 0 0 2px 0;
              color: #374151;
              /* neutral */
          }

          .graph-header .subtitle {
              margin: 0 0 8px 0;
              color: #6b7280;
              font-size: 12px;
          }

          .graph-svg svg {
              width: auto;
              height: auto;
              max-width: 340px;
              max-height: 340px;
              display: block;
              flex-shrink: 0;
          }

          #loading {
              text-align: center;
              color: #666;
              padding: 40px;
              font-size: 18px;
          }

          .error {
              color: #d32f2f;
              padding: 20px;
              background: #ffebee;
              border-radius: 4px;
              margin: 20px 0;
          }

          .svg-latex {
              display: flex;
              align-items: center;
              justify-content: center;
              width: 100%;
              height: 100%;
              padding: 0;
              box-sizing: border-box;
              border-radius: 0.25rem;
              font-size: 0.875rem;
          }

          foreignObject .katex {
              margin: 0 !important;
              padding: 0 !important;
              line-height: 1 !important;
              font-size: inherit !important;
              color: inherit !important;
              text-align: center;
          }

          foreignObject div {
              height: 100%;
              width: 100%;
              color: inherit !important;
          }

          .subtitle {
              color: #666;
              margin-bottom: 20px;
          }

          /**************** SVG colors (& Logo ZÃ©lie) ****************/


          /********* Primary *********/

          .stroke-primary {
              stroke: var(--color-primary) !important;
          }

          .fill-primary {
              fill: var(--color-primary) !important;
          }

          .text-primary {
              color: var(--color-primary) !important;
          }

          /********* Primary content *********/
          .stroke-primary-content {
              stroke: var(--color-primary-content) !important;
          }

          .fill-primary-content {
              fill: var(--color-primary-content) !important;
          }

          .text-primary-content {
              color: var(--color-primary-content) !important;
          }

          /********* Secondary *********/

          .stroke-secondary {
              stroke: var(--color-secondary) !important;
          }

          .fill-secondary {
              fill: var(--color-secondary) !important;
          }

          .text-secondary {
              color: var(--color-secondary) !important;
          }


          /********* Secondary content *********/

          .stroke-secondary-content {
              stroke: var(--color-secondary-content) !important;
          }

          .fill-secondary-content {
              fill: var(--color-secondary-content) !important;
          }

          .text-secondary-content {
              color: var(--color-secondary-content) !important;
          }





          /********* Primary ghost *********/
          .stroke-primary-ghost {
              stroke: var(--color-primary-ghost) !important;
          }

          .fill-primary-ghost {
              fill: var(--color-primary-ghost) !important;
          }

          .text-primary-ghost {
              color: var(--color-primary-ghost) !important;
          }

          .text-primary-ghost {
              color: var(--color-primary-ghost) !important;
          }





          /********* Secondary ghost *********/
          .stroke-secondary-ghost {
              stroke: var(--color-secondary-ghost) !important;
          }

          .fill-secondary-ghost {
              fill: var(--color-secondary-ghost) !important;
          }

          .text-secondary-ghost {
              color: var(--color-secondary-ghost) !important;
          }





          /********* Accent *********/


          .stroke-accent {
              stroke: var(--color-accent) !important;
          }

          .fill-accent {
              fill: var(--color-accent) !important;
          }

          .text-accent {
              color: var(--color-accent) !important;
          }


          /********* Accent content *********/


          .stroke-accent-content {
              stroke: var(--color-accent-content) !important;
          }

          .fill-accent-content {
              fill: var(--color-accent-content) !important;
          }

          .text-accent-content {
              color: var(--color-accent-content) !important;
          }

          /********* Base 100 *********/

          .stroke-base-100 {
              stroke: var(--color-base-100) !important;
          }

          .fill-base-100 {
              fill: var(--color-base-100) !important;
          }

          .text-base-100 {
              color: var(--color-base-100) !important;
          }

          /********* Base 200 *********/

          .stroke-base-200 {
              stroke: var(--color-base-200) !important;
          }

          .fill-base-200 {
              fill: var(--color-base-200) !important;
          }

          .text-base-200 {
              color: var(--color-base-200) !important;
          }

          /********* Base 300 *********/

          .stroke-base-300 {
              stroke: var(--color-base-300) !important;
          }

          .fill-base-300 {
              fill: var(--color-base-300) !important;
          }

          .text-base-300 {
              color: var(--color-base-300) !important;
          }

          /********* Base content *********/

          .stroke-base-content {
              stroke: var(--color-base-content) !important;
          }

          .fill-base-content {
              fill: var(--color-base-content) !important;
          }

          .text-base-content {
              color: var(--color-base-content) !important;
          }

          /********* Backgrounds *********/
          /* TODO : no ... shouldbe fill so already exists or use above syntaxe for X50 */


          .bg-base-100 {
              fill: var(--color-base-100) !important;
          }

          .bg-base-200 {
              fill: var(--color-base-200) !important;
          }

          .bg-base-300 {
              fill: var(--color-base-300) !important;
          }

          .bg-base-150 {
              fill: color-mix(in srgb,
                      var(--color-base-100) 50%,
                      var(--color-base-200) 50%);
          }

          .bg-base-250 {
              fill: color-mix(in srgb,
                      var(--color-base-200) 50%,
                      var(--color-base-300) 50%);
          }
      </style>


      <style>
          .control-panel {
              background: white;
              border-radius: 8px;
              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
              padding: 20px;
              margin-bottom: 30px;
          }

          .control-panel h2 {
              margin-top: 0;
              color: #374151;
              font-size: 18px;
          }

          .control-group {
              display: flex;
              align-items: center;
              gap: 15px;
              margin-top: 15px;
          }

          .control-group label {
              font-weight: 500;
              color: #374151;
          }

          .control-group input {
              padding: 6px 12px;
              border: 1px solid #d1d5db;
              border-radius: 4px;
              font-size: 14px;
              width: 80px;
          }

          .control-group button {
              padding: 6px 16px;
              background: #1976d2;
              color: white;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              font-size: 14px;
          }

          .control-group button:hover {
              background: #1565c0;
          }

          .config-info {
              margin-top: 10px;
              font-size: 12px;
              color: #6b7280;
              background: #f9fafb;
              padding: 8px 12px;
              border-radius: 4px;
          }
      </style>
    </head>
    <body>
      <h1>SUJETS0 Graphs - Simple Version</h1>

      <!-- Control Panel for Graph Configuration -->
      <div class="control-panel" id="control-panel" style="display: none;">
        <h2>Graph Configuration</h2>

        <!-- Question 7: Parabola with Horizontal Line -->
        <div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #e5e7eb;">
          <h3 style="font-size: 14px; color: #4b5563; margin-bottom: 12px;">
            Question 7: Parabola y = xÂ² with Horizontal Line
          </h3>
          <div class="control-group">
            <label for="y-label-input">Y Label for Horizontal Line:</label>
            <input type="number" id="y-label-input" value="10" min="-50" max="50" step="1" />
          </div>
          <div class="config-info" style="margin-top: 8px; font-size: 11px;">
            Current: Y_LABEL_FOR_HORIZONTAL_LINE = <span id="y-label-value">10</span>
          </div>
        </div>

        <!-- Question 8: Affine Function -->
        <div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #e5e7eb;">
          <h3 style="font-size: 14px; color: #4b5563; margin-bottom: 12px;">
            Question 8: Affine Function y = ax + b
          </h3>
          <div class="control-group">
            <label for="a-float-input">Coefficient a (slope):</label>
            <input type="number" id="a-float-input" value="0.75" min="-10" max="10" step="0.01" />
          </div>
          <div class="control-group" style="margin-top: 10px;">
            <label for="b-float-input">Coefficient b (y-intercept):</label>
            <input type="number" id="b-float-input" value="2" min="-20" max="20" step="1" />
          </div>
          <div class="config-info" style="margin-top: 8px; font-size: 11px;">
            Current: A_FLOAT_FOR_AFFINE_LINE = <span id="a-float-value">0.75</span>, B_FLOAT_FOR_AFFINE_LINE = <span id="b-float-value">2</span>
          </div>
        </div>

        <!-- Question 10: Parabola Shifts -->
        <div style="margin-bottom: 25px;">
          <h3 style="font-size: 14px; color: #4b5563; margin-bottom: 12px;">
            Question 10: Parabola Shifts y = Â±xÂ² Â± a
          </h3>
          <div class="control-group">
            <label for="a-shift-input">Shift Magnitude |a|:</label>
            <input type="number" id="a-shift-input" value="5" min="1" max="10" step="1" />
          </div>
          <div class="config-info" style="margin-top: 8px; font-size: 11px;">
            Current: A_SHIFT_MAGNITUDE = <span id="a-shift-value">5</span>
            <br />
            <span style="color: #6b7280;">Affects 4 parabola graphs: y = xÂ² Â± a and y = -xÂ² Â± a</span>
          </div>
        </div>

        <!-- Update Button -->
        <div class="control-group" style="justify-content: center; margin-top: 20px;">
          <button onclick="updateGraphConfig()" style="width: 200px;">Update All Graphs</button>
        </div>
      </div>

      <div id="loading">Loading...</div>
      <div id="error-container"></div>
      <div id="graphs-container"></div>

      <!-- Load the simplified JavaScript -->
      <script type="module" src="sujets0-app-simple.js"></script>

      <script>
          // Make updateGraphConfig available globally
          window.updateGraphConfig = async function() {
              // Get Question 7 values
              const yLabelValue = parseFloat(document.getElementById('y-label-input').value);

              // Get Question 8 values
              const aFloatValue = parseFloat(document.getElementById('a-float-input').value);
              const bFloatValue = parseFloat(document.getElementById('b-float-input').value);

              // Get Question 10 values
              const aShiftValue = parseInt(document.getElementById('a-shift-input').value);

              if (!isNaN(yLabelValue) && !isNaN(aFloatValue) && !isNaN(bFloatValue) && !isNaN(aShiftValue)) {
                  // Update the config object in the module
                  if (window.GRAPH_CONFIG) {
                      window.GRAPH_CONFIG.Y_LABEL_FOR_HORIZONTAL_LINE = yLabelValue;
                      window.GRAPH_CONFIG.A_FLOAT_FOR_AFFINE_LINE = aFloatValue;
                      window.GRAPH_CONFIG.B_FLOAT_FOR_AFFINE_LINE = bFloatValue;
                      window.GRAPH_CONFIG.A_SHIFT_MAGNITUDE = aShiftValue;

                      // Update display values
                      document.getElementById('y-label-value').textContent = yLabelValue;
                      document.getElementById('a-float-value').textContent = aFloatValue;
                      document.getElementById('b-float-value').textContent = bFloatValue;
                      document.getElementById('a-shift-value').textContent = aShiftValue;

                      // Trigger reload of graphs
                      document.getElementById('loading').style.display = 'block';
                      document.getElementById('loading').textContent = 'Reloading graphs with new configuration...';

                      if (window.reloadGraphsWithConfig) {
                          await window.reloadGraphsWithConfig();
                      } else {
                          alert('Graph reload function not available yet. Please refresh the page.');
                      }
                  }
              } else {
                  alert('Please enter valid numeric values for all fields.');
              }
          };
      </script>
    </body>
  </html>
